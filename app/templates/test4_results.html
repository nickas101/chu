{% extends "base_generic.html" %}
{% block title %}Please select{% endblock %}

{% block navbar %}
<div class="navbar navbar-fixed-top">
  <!-- ... -->
</div>
{% endblock %}

{% block content %}


  <ul class="nav nav-tabs">
    <li><a href="{{ url_for('test1') }}">Test-1-SETUP</a></li>
    <li><a href="{{ url_for('test1_result') }}">Test-1-RESULT</a></li>
    <li><a href="{{ url_for('test2') }}">Test-2-SETUP</a></li>
    <li><a href="{{ url_for('test2_result') }}">Test-2-RESULT</a></li>
    <li><a href="{{ url_for('test3') }}">Test-3-SETUP</a></li>
    <li><a href="{{ url_for('test3_result') }}">Test-3-RESULT</a></li>
    <li><a href="{{ url_for('test4') }}">Test-4-SETUP</a></li>
    <li class="active"><a href="{{ url_for('test4_result') }}">Test-4-RESULT</a></li>
  </ul>




  <div class="container-fluid">

    <div style="padding-top: 30px;"></div>

    {% if message_text %}
      {% if message_success %}
        <div class="alert alert-success" role="alert">
          <strong>Success!</strong>{{ message_text }}
        </div>
      {% else %}
        <div class="alert alert-danger" role="alert">
          <strong>Error!</strong>{{ message_text }}
        </div>
      {% endif %}
    {% endif %}

    <div style="padding-top: 10px;"></div>



    <div class="container-fluid">
        <form class="form-horizontal" id="form2" action="/chu/test4/result" method="POST" enctype="multipart/form-data">

          <div class="form-group">
            <label for="folder" class="col-sm-2 control-label">Folder</label>
            <div class="col-sm-6">
              <input type="text" class="form-control" id="folder" name="folder" value="{{ entered_folder }}" placeholder="Working folder">
            </div>

          <label for="folder" class="col-sm-1 control-label">Interpolation</label>
            <div class="col-sm-1">
              <input type="text" class="form-control" id="inter" name="inter" value="{{ entered_interpol }}" placeholder="Interpolation">
            </div>
            <div class="col-sm-2">
                <button type="submit" class="btn btn-success">Re-Check</button>
            </div>
          </div>

            {% if message_success %}

                {% if bad_units_exist %}
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Bad units (pos)</label>
                        <div class="col-sm-8">
                          <p class="form-control-static">{{ bad_units }}</p>
                        </div>
                        <div class="col-sm-2"></div>
                    </div>
                {% endif %}

                <div class="form-group">
                    <label class="col-sm-2 control-label">Files</label>
                    <div class="col-sm-6">
                      <p class="form-control-static">{{ file3 }}  <i>(mod: {{time3}})</i> and {{ file4 }}  <i>(mod: {{time4}})</i></p>
                    </div>
<!--                    <div class="col-sm-1"></div>-->

                    <label for="ppb_threshold" class="col-sm-1 control-label">ppb(+/-) </label>
                    <div class="col-sm-1">
                      <input type="text" class="form-control" id="ppb_threshold" name="ppb_threshold" value="{{ ppb_threshold }}" placeholder="+/-ppb">
                    </div>
<!--                    <div class="col-sm-3"></div>-->
<!--                    <div class="col-sm-3"></div>-->
                </div>

            {% endif %}

        </form>
    </div>


      <hr class="style1">

    {% if message_success %}

      <div class="container">

        <div style="padding-top: 10px;"></div>

<!--        <table class="table table-bordered table-hover table-condensed text-center">-->
        <table class="table table-hover table-condensed text-center">
        <tr>
            {% for col in column_names_1 %}
                <th class="text-center">{{col}}</th>
            {% endfor %}
        </tr>

        {% for row in row_data_1 %}
        <tr>
            {% for col, row_ in zip(column_names_1, row) %}

            {% if col == 'min_ppb_norm' %}

              {% if row_ < (-ppb_threshold) %}
                <td class="danger">{{row_}}</td>
              {% else %}
<!--                <td class="success">{{row_}}</td>-->
                <td>{{row_}}</td>
              {% endif %}

            {% elif col == 'max_ppb_norm' %}

              {% if row_ > ppb_threshold %}
                <td class="danger">{{row_}}</td>
              {% else %}
<!--                <td class="success">{{row_}}</td>-->
                <td>{{row_}}</td>
              {% endif %}

            {% else %}
          <td>{{row_}}</td>
           {% endif %}


            {% endfor %}
        </tr>
        {% endfor %}

    </table>
          </div>


            <div class="container-fluid">

            </div>

<div style="padding-top: 10px;"></div>
      <div class="container">

         <form class="form-inline" id="form1" action="/chu/test4/result" method="GET" enctype="multipart/form-data">
            <div class="col-sm-1"></div>
            <div class="col-sm-9">
                <div class="form-group">
                    <label for="pos">Unit pos: </label>
                    <select class="form-control input-sm" id="pos" name="pos">
                        {% for pos in poses %}
                            <option value="{{pos}}" {% if pos == entered_pos %} selected {% endif %}>{{pos}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group" style="padding-left: 10px">
                    <label for="high_temp_limit">High temp limit: </label>
                    <input type="text" class="form-control input-sm" id="high_temp_limit" name="high_temp_limit" size="4" value="{{ entered_high_temp_limit }}" placeholder="Temp">
                </div>
                <button type="submit" class="btn btn-default btn-sm" style="margin-left: 10px">Filter</button>
             </div>
         </form>

        <a href="/chu/result/plot/download" target="blank"><button class='btn btn-success btn-sm'>Save plot</button></a>

        <img class="img-responsive center-block" src="/chu/test4/result/plot.png" alt="plot" align="centre">


<div style="padding-top: 20px;"></div>


<!--    <table class="table table-bordered table-hover table-condensed text-center">-->
    <table class="table table-hover table-condensed text-center">
        <tr>
            {% for col in column_names %}
                <th class="text-center">{{col}}</th>
            {% endfor %}
        </tr>

        {% for row in row_data %}
        <tr>
            {% for col, row_ in zip(column_names, row) %}

          <td>{{row_}}</td>


            {% endfor %}
        </tr>
        {% endfor %}

    </table>

{% endif %}
    </div>


  </div>


{% endblock %}


